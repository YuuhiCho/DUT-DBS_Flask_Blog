{% extends 'base.html' %}

{% block title %}
{{ post.title }}
{% endblock %}

{% block main_body %}
<div class="panel panel-default">
    <post class="vc-blog">
        <h1 class="vc-blog-title">{{ post.title }}</h1>
        <p class="vc-author-info">
            <time>{{ display_time.strftime('%Y-%m-%d %H:%M:%S') }}</time> &bull; <a href="{{ url_for('blog.about') }}">{{ post.user.username }}</a> &bull; ğŸ‘{{ post.view_count }} &bull;
            <a class="like-info"> <button class="like-button" onclick="like_post({{ post.id }})">â¤</button><span id="like_count_{{ post.id }}">{{ post.like_count }}</span>
                </a>
        </p>
        <div class="vc-blog-content">
            {{ post.content.replace('\n', '<br>')|safe }}
        </div>
        <span class="vc-tags">
            <a href="{{ url_for('blog.tag', tag_id=post.tag_id) }}">æ ‡ç­¾ï¼š{{ post.tag.tag_name }}</a>

            {% if user %}
            <a href="{{ url_for('blog.edit', post_id=post.id) }}">ç¼–è¾‘</a>
            <a href="{{ url_for('blog.delete', post_id=post.id) }}" onclick="return confirm('ç¡®è®¤è¦åˆ é™¤å—ï¼Ÿ');">åˆ é™¤</a>
            {% endif %}
        </span>
        <div class="vc-comments" id="comment">
            <h2>è¯„è®ºï¼š</h2>
                {% for comment in comments %}
                    <div class="vc-comment" >
                        <strong>{{ comment.commenter_name }}({{ comment.commenter_email }}): </strong><br>
                        <br>{{ comment.content }}<br>

                        <br><time>å‘è¡¨äº{{ comment.local_time.strftime('%Y-%m-%d %H:%M:%S') }}  &bull;</time>
                            <a class="like-info" ><button class="like-button" onclick="like_comment({{ comment.id }})">â¤</button><span id="like_count_{{ comment.id }}">{{ comment.like_count }}</span>
                    </a>
                        <span class="vc-tags">
                            {% if user %}
                            <a href="{{ url_for('blog.delete_comment', comment_id=comment.id) }}" onclick="return confirm('ç¡®è®¤è¦åˆ é™¤è¿™æ¡è¯„è®ºå—ï¼Ÿ');">åˆ é™¤</a>
                            {% endif %}
                        </span>
                    </div>
                {% else %}
                <li>è¿˜æ²¡æœ‰ä»»ä½•è¯„è®º</li>
                {% endfor %}
        </div>
        <div class="vc-add-comment">
            <h3>æ·»åŠ æ–°è¯„è®ºï¼š</h3>
            <form action="{{ url_for('blog.create_comment', post_id=post.id) }}" method="post">
                <input type="text" placeholder="è¯·è¾“å…¥æ˜µç§°" name="commenter_name" required><br>
                <input type="email" placeholder="è¯·è¾“å…¥é‚®ç®±" name="commenter_email" required><br>
                <input type="text" placeholder="è¯·è¾“å…¥è¯„è®º" name="content" required>
                <button type="submit">å‘é€è¯„è®º</button>
            </form>
        </div>
        <div class="vc-copyright">
            è½¬è½½è¯·æ³¨æ˜ï¼šæ–‡ç« è½¬è½½è‡ªï¼šflaskblogï¼ˆ<a href="https://flaskblog.example/">https://flaskblog.example/a>ï¼‰
        </div>
    </post>
</div>
{% endblock %}
